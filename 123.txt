# iStoreOS OpenClash 配置文件
# 订阅更新节点
proxy-providers:
  sub:
    type: http
    url: "https://VYTMdZRj.subxly.cfd:8443/api/v1/client/3bedf52c5cff9447d1b80fbfd21e94ae"
    interval: 86400   # 订阅更新：24小时
    path: ./providers/sub.yaml
    health-check:
      enable: true
      interval: 300   # 节点更新（测速）：5分钟
      lazy: true
      url: http://www.gstatic.com/generate_204

# 地区分类分组（正则匹配）

proxy-groups:
  - {name: 🇭🇰 香港节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)香港|HK|Hong Kong"}
  - {name: 🇨🇳 台湾节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)台湾|TW|Taiwan"}
  - {name: 🇸🇬 狮城节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)新加坡|SG|Singapore|SGP"}
  - {name: 🇯🇵 日本节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)日本|JP|Japan|JPN"}
  - {name: 🇺🇲 美国节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)美国|US|United States|USA"}
  - {name: 🇰🇷 韩国节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)韩国|KR|Korea"}
  - {name: 🇮🇳 印度节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)印度|IN|India"}
  - {name: 🇦🇺 澳大利亚节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)澳大利亚|AU|Australia"}
  - {name: 🇧🇷 巴西节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)巴西|BR|Brazil"}
  - {name: 🇩🇪 德国节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)德国|DE|Germany"}
  - {name: 🇫🇷 法国节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)法国|FR|France"}
  - {name: 🇬🇧 英国节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)英国|UK|United Kingdom|Britain"}
  - {name: 🇪🇸 西班牙节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)西班牙|ES|Spain"}
  - {name: 🇳🇱 荷兰节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)荷兰|NL|Netherlands"}
  - {name: 🇺🇸 洛杉矶节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)洛杉矶|LA|Los Angeles"}
  - {name: 🇲🇽 墨西哥节点, type: url-test, use: [sub], url: http://www.gstatic.com/generate_204, interval: 300, filter: "(?i)墨西哥|MX|Mexico"}

  # 总选择组
  - name: 节点选择
    type: select
    proxies:
      - 自动选择
      - DIRECT
      - 🇭🇰 香港节点
      - 🇨🇳 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇲 美国节点
      - 🇰🇷 韩国节点
      - 🇮🇳 印度节点
      - 🇦🇺 澳大利亚节点
      - 🇧🇷 巴西节点
      - 🇩🇪 德国节点
      - 🇫🇷 法国节点
      - 🇬🇧 英国节点
      - 🇪🇸 西班牙节点
      - 🇳🇱 荷兰节点
      - 🇺🇸 洛杉矶节点
      - 🇲🇽 墨西哥节点

  - name: 手动切换
    type: select
    use: [sub]

  - name: 自动选择
    type: url-test
    use: [sub]
    url: http://www.gstatic.com/generate_204
    interval: 300   # 每5分钟测速一次

  # 流媒体及服务分流策略组
  - {name: 电报消息, type: select, proxies: [节点选择, 手动切换, 自动选择, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 狮城节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇪🇸 西班牙节点, DIRECT]}
  - {name: OpenAi, type: select, proxies: [节点选择, 手动切换, 自动选择, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 狮城节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇪🇸 西班牙节点, DIRECT]}
  - {name: 油管视频, type: select, proxies: [节点选择, 手动切换, 自动选择, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 狮城节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇪🇸 西班牙节点]}
  - {name: 奈飞视频, type: select, proxies: [节点选择, 手动切换, 自动选择, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 狮城节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇪🇸 西班牙节点]}
  - {name: 迪士尼, type: select, proxies: [节点选择, 手动切换, 自动选择, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 狮城节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇪🇸 西班牙节点]}
  - {name: 巴哈姆特, type: select, proxies: [节点选择, 手动切换, 自动选择, 🇭🇰 香港节点, 🇨🇳 台湾节点]}
  - {name: Max, type: select, proxies: [节点选择, 手动切换, 自动选择, 🇭🇰 香港节点, 🇸🇬 狮城节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇪🇸 西班牙节点]}
  - {name: 哔哩哔哩, type: select, proxies: [节点选择, 手动切换, DIRECT]}
  - {name: 国外媒体, type: select, proxies: [节点选择, 手动切换, 自动选择]}
  - {name: 国内媒体, type: select, proxies: [节点选择, 手动切换, DIRECT]}
  - {name: 谷歌FCM, type: select, proxies: [节点选择, 手动切换, DIRECT]}
  - {name: 微软Bing, type: select, proxies: [节点选择, 手动切换, DIRECT]}
  - {name: 微软云盘, type: select, proxies: [节点选择, 手动切换, DIRECT]}
  - {name: 苹果服务, type: select, proxies: [节点选择, 手动切换, DIRECT]}
  - {name: 游戏平台, type: select, proxies: [节点选择, 手动切换, DIRECT]}
  - {name: 网易音乐, type: select, proxies: [节点选择, 手动切换, DIRECT]}
  - {name: 全球直连, type: select, proxies: [DIRECT, 手动切换]}
  - {name: 漏网之鱼, type: select, proxies: [节点选择, 手动切换, DIRECT]}

# 引入 ACL4SSR 规则集
rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/Reject.yaml"
    path: ./ruleset/reject.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/ChinaDomain.yaml"
    path: ./ruleset/direct.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/ProxyMedia.yaml"
    path: ./ruleset/proxy.yaml
    interval: 86400

  telegram:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/Telegram.yaml"
    path: ./ruleset/telegram.yaml
    interval: 86400

  netflix:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/Netflix.yaml"
    path: ./ruleset/netflix.yaml
    interval: 86400

  youtube:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/YouTube.yaml"
    path: ./ruleset/youtube.yaml
    interval: 86400

  openai:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/OpenAI.yaml"
    path: ./ruleset/openai.yaml
    interval: 86400

rules:
  - RULE-SET,reject,REJECT
  - RULE-SET,telegram,电报消息
  - RULE-SET,netflix,奈飞视频
  - RULE-SET,youtube,油管视频
  - RULE-SET,openai,OpenAi
  - RULE-SET,proxy,国外媒体
  - RULE-SET,direct,国内媒体
  - GEOIP,CN,全球直连
  - MATCH,漏网之鱼